{"version":3,"file":"button.min.js","sources":["../src/button.js"],"sourcesContent":["define(['jquery', 'core/ajax'], function($, ajax) {\n    return {\n        init: function() {\n            console.log(\"JavaScript wird geladen!\");\n\n\n            $('.learningplan-save-button').each(function() {\n                var button = $(this);\n                var courseId = button.data('course-id');\n                var sectionId = button.data('section-id');\n                var userId = button.data('user-id');\n\n                // Überprüfen, ob die Section gespeichert ist\n                ajax.call([{\n                    methodname: 'local_learningplan_check_section_data',\n                    args: {\n                        courseid: courseId,\n                        sectionid: sectionId,\n                        userid: userId\n                    },\n                    done: function(response) {\n                        console.log('Server-Antwort learningplan_check: ' + response);\n                        if (response) {\n                            button.text('Entfernen');\n                        } else {\n                            button.text('Speichern');\n                        }\n                    },\n                    fail: function(error) {\n                        console.error('Fehler:', error);\n                    }\n                }]);\n            });\n\n\n            $(document).on('click', '.learningplan-save-button', function() {\n                var button = $(this);\n                var courseId = button.data('course-id');\n                var sectionId = button.data('section-id');\n                var userId = button.data('user-id');\n\n                var currentText = button.text().trim();\n                console.log('currentText:' + currentText);\n\n                if (currentText === 'Speichern') {\n                    ajax.call([{\n                        methodname: 'local_learningplan_save_section_data',\n                        args: {\n                            courseid: courseId,\n                            sectionid: sectionId,\n                            userid: userId\n                        },\n                        done: function() {\n                            button.text('Entfernen').prop('disabled', false);\n                        },\n                        fail: function(error) {\n                            console.log('Fehler:', error);\n                            alert('Fehler beim Speichern der Daten.');\n                        }\n                    }]);\n                } else if (currentText === 'Entfernen') {\n                    ajax.call([{\n                        methodname: 'local_learningplan_delete_section_data',\n                        args: {\n                            courseid: courseId,\n                            sectionid: sectionId,\n                            userid: userId\n                        },\n                        done: function() {\n                            button.text('Speichern').prop('disabled', false);\n                        },\n                        fail: function(error) {\n                            console.log('Fehler:', error);\n                            alert('Fehler beim Entfernen der Daten.');\n                        }\n                    }]);\n                }\n            });\n        }\n    };\n});\n"],"names":["define","$","ajax","init","console","log","each","button","this","courseId","data","sectionId","userId","call","methodname","args","courseid","sectionid","userid","done","response","text","fail","error","document","on","currentText","trim","prop","alert"],"mappings":"AAAAA,mCAAO,CAAC,SAAU,cAAc,SAASC,EAAGC,YACjC,CACHC,KAAM,WACFC,QAAQC,IAAI,4BAGZJ,EAAE,6BAA6BK,MAAK,eAC5BC,OAASN,EAAEO,MACXC,SAAWF,OAAOG,KAAK,aACvBC,UAAYJ,OAAOG,KAAK,cACxBE,OAASL,OAAOG,KAAK,WAGzBR,KAAKW,KAAK,CAAC,CACPC,WAAY,wCACZC,KAAM,CACFC,SAAUP,SACVQ,UAAWN,UACXO,OAAQN,QAEZO,KAAM,SAASC,UACXhB,QAAQC,IAAI,sCAAwCe,UAChDA,SACAb,OAAOc,KAAK,aAEZd,OAAOc,KAAK,cAGpBC,KAAM,SAASC,OACXnB,QAAQmB,MAAM,UAAWA,cAMrCtB,EAAEuB,UAAUC,GAAG,QAAS,6BAA6B,eAC7ClB,OAASN,EAAEO,MACXC,SAAWF,OAAOG,KAAK,aACvBC,UAAYJ,OAAOG,KAAK,cACxBE,OAASL,OAAOG,KAAK,WAErBgB,YAAcnB,OAAOc,OAAOM,OAChCvB,QAAQC,IAAI,eAAiBqB,aAET,cAAhBA,YACAxB,KAAKW,KAAK,CAAC,CACPC,WAAY,uCACZC,KAAM,CACFC,SAAUP,SACVQ,UAAWN,UACXO,OAAQN,QAEZO,KAAM,WACFZ,OAAOc,KAAK,aAAaO,KAAK,YAAY,IAE9CN,KAAM,SAASC,OACXnB,QAAQC,IAAI,UAAWkB,OACvBM,MAAM,wCAGS,cAAhBH,aACPxB,KAAKW,KAAK,CAAC,CACPC,WAAY,yCACZC,KAAM,CACFC,SAAUP,SACVQ,UAAWN,UACXO,OAAQN,QAEZO,KAAM,WACFZ,OAAOc,KAAK,aAAaO,KAAK,YAAY,IAE9CN,KAAM,SAASC,OACXnB,QAAQC,IAAI,UAAWkB,OACvBM,MAAM"}