define("local_learningplan/button",["jquery","core/ajax"],(function($,ajax){return{init:function(params){let userId=params,courseId=$("body").attr("class").match(/course-(\d+)/);courseId=courseId?courseId[1]:null,userId&&courseId&&($(".sectionname").each((function(){let sectionTitle=$(this),sectionId=sectionTitle.closest('[id^="section-"]').attr("id").replace("section-","");ajax.call([{methodname:"local_learningplan_get_section_option",args:{sectionid:sectionId,courseid:courseId},done:function(response){if(!sectionTitle.find(".learningplan-save-button").length){let button=$("<button>").addClass("btn learningplan-save-button").attr("data-section-id",sectionId).attr("data-course-id",courseId).attr("data-user-id",userId).html('<i class="icon fa-regular fa-bookmark"></i>').css({"border-color":"transparent","margin-right":"5px",height:"40px",width:"40px"});ajax.call([{methodname:"local_learningplan_check_section_data",args:{courseid:courseId,sectionid:sectionId,userid:userId},done:function(response){let icon=button.find("i");response&&icon.removeClass("fa-regular").addClass("fa-solid")},fail:function(error){console.error("Error:",error)}}]),sectionTitle.prepend(button),0===response&&button.hide()}},fail:function(error){console.error("Error when retrieving the learning plan option:",error)}}])})),$(document).on("click",".learningplan-save-button",(function(){let button=$(this),courseId=button.data("course-id"),sectionId=button.data("section-id"),userId=button.data("user-id"),currentIcon=button.find("i");currentIcon.hasClass("fa-regular")?ajax.call([{methodname:"local_learningplan_save_section_data",args:{courseid:courseId,sectionid:sectionId,userid:userId},done:function(){currentIcon.removeClass("fa-regular").addClass("fa-solid")},fail:function(error){console.error("Error:",error)}}]):currentIcon.hasClass("fa-solid")&&ajax.call([{methodname:"local_learningplan_delete_section_data",args:{courseid:courseId,sectionid:sectionId,userid:userId},done:function(){currentIcon.removeClass("fa-solid").addClass("fa-regular")},fail:function(error){console.error("Error:",error)}}])})))}}}));

//# sourceMappingURL=button.min.js.map