define("local_learningplan/learningplan",["jquery","core/ajax"],(function($,ajax){return{init:function(){$(document).on("click",".remove-section-btn",(function(){let button=$(this),courseId=button.data("courseid"),sectionId=button.data("sectionid"),userId=button.data("userid");console.log("Neue Javascript wurde geladen"),ajax.call([{methodname:"local_learningplan_delete_section_data",args:{courseid:courseId,sectionid:sectionId,userid:userId},done:function(){console.log("Section aus Datenbank gelöscht"),$('tr[data-sectionid="'+sectionId+'"]').fadeOut(300,(function(){$(this).remove()}))},fail:function(error){console.error("Fehler beim Entfernen der Section:",error)}}])})),console.log("Datepicker wird initialisiert"),$(document).ready((function(){$(".datepicker").on("change",(function(){let input=$(this),courseId=input.data("courseid"),sectionId=input.data("sectionid"),userId=input.data("userid"),newDeadline=input.val();console.log("Neues Datum gewählt:",newDeadline),ajax.call([{methodname:"local_learningplan_update_deadline",args:{courseid:courseId,sectionid:sectionId,userid:userId,deadline:newDeadline},done:function(){console.log("Deadline erfolgreich gespeichert!")},fail:function(error){console.error("Fehler beim Speichern der Deadline:",error)}}])}))})),$(".progress-dropdown").on("change",(function(){let input=$(this),courseId=input.data("courseid"),sectionId=input.data("sectionid"),userId=input.data("userid"),newProgress=input.val();console.log("Neuer Bearbeitungsstand:",newProgress),ajax.call([{methodname:"local_learningplan_update_progress",args:{courseid:courseId,sectionid:sectionId,userid:userId,progress:newProgress},done:function(){console.log("Bearbeitungsstand erfolgreich gespeichert!")},fail:function(error){console.error("Fehler beim Speichern des Bearbeitungsstands:",error)}}])})),$(document).ready((function(){const searchInput=$("#searchInput"),filterSelect=$("#filterSelect");function filterTable(){let searchText=searchInput.val().toLowerCase(),filterValue=filterSelect.val().toLowerCase();$(".learningplan-section").each((function(){let row=$(this),courseName=row.find("td").eq(0).text().toLowerCase(),sectionName=row.find("td").eq(1).text().toLowerCase(),progress=row.data("progress").toLowerCase();(courseName.includes(searchText)||sectionName.includes(searchText))&&(""===filterValue||progress===filterValue)?row.show():row.hide()}))}searchInput.on("keyup",filterTable),filterSelect.on("change",filterTable)})),$(document).ready((function(){let sortDirection={};function getCellValue(row,column){let cell=row.find("td").eq(function(column){return["coursename","sectionname","addeddate","processing_deadline","progress"].indexOf(column)}(column));return"processing_deadline"===column?new Date(cell.find("input").val()).getTime()||0:"progress"===column?cell.find("select").val():"addeddate"===column?new Date(cell.text().trim().split(".").reverse().join("-")).getTime()||0:cell.text().trim()}$(".sortable").on("click",(function(){let column=$(this).data("column"),tableBody=$("#learningPlanTable tbody"),rows=tableBody.find("tr").toArray();sortDirection[column]=!sortDirection[column],rows.sort((function(rowA,rowB){return(getCellValue($(rowA),column)<getCellValue($(rowB),column)?-1:1)*(sortDirection[column]?1:-1)})),$.each(rows,(function(index,row){tableBody.append(row)}))}))}))}}}));

//# sourceMappingURL=learningplan.min.js.map